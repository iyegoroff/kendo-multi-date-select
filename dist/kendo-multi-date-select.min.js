var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},__assign=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},kendoExt;!function(t){var e=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.initMultiSelect(e),i.initPopup(e),i.initCalendar(i._popup.element),i.updateDateInterval(),i}return __extends(e,t),e.removeTime=function(t){var e=new Date(t);return e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e},e.isDateGreater=function(t,n){return e.removeTime(t).getTime()>e.removeTime(n).getTime()},e.isDateLesser=function(t,n){return e.removeTime(t).getTime()<e.removeTime(n).getTime()},e.prototype.open=function(){this._popup.open()},e.prototype.close=function(){this._popup.close()},e.prototype.toggle=function(){this._popup.visible()?this.close():this.open()},e.prototype.destroy=function(){this._multiSelect.wrapper.find("input").off("keydown"),this._popup.destroy(),this._multiSelect.destroy(),this._multiCalendar.destroy(),t.prototype.destroy.call(this)},e.prototype.enable=function(t){t||this.close(),this._multiSelect.enable(t)},e.prototype.readonly=function(t){t&&this.close(),this._multiSelect.readonly(t)},e.prototype.max=function(t){return void 0!==t&&(this._multiCalendar.max(t),this.updateDateInterval()),this._multiCalendar.max()},e.prototype.min=function(t){return void 0!==t&&(this._multiCalendar.min(t),this.updateDateInterval()),this._multiCalendar.min()},e.prototype.values=function(t){if(void 0!==t){var n=this.min(),i=this.max(),o=(t||[]).filter(function(t){return!(n&&e.isDateLesser(t,n)||i&&e.isDateGreater(t,i))});this._multiCalendar.values(o),this.updateMultiSelectValues(o),o.length&&this._multiCalendar.navigate(o[o.length-1])}return this._multiSelect.value()},e.prototype.multiSelect=function(){return this._multiSelect},e.prototype.multiCalendar=function(){return this._multiCalendar},e.prototype.initMultiSelect=function(t){var n=this,i=this.options;i.tagTemplate=i.tagTemplate||function(t){return kendo.toString(t,i.format)};var o=function(t){t.preventDefault(),n.open()},a=function(){n._multiCalendar.values(n._multiSelect.value()),n._popup.position(),n.trigger(e.changeEvent)};this._multiSelect=$("<select multiple></select>").appendTo(t).kendoMultiSelect({dataSource:i.values,value:i.values,ignoreCase:!1,enable:i.enable,maxSelectedItems:i.maxSelectedItems,placeholder:i.placeholder,tagTemplate:i.tagTemplate,open:o,change:a}).data("kendoMultiSelect"),this._multiSelect._filterSource=function(){return{}},this._multiSelect.search=function(){return{}},this._multiSelect.wrapper.find("input").on("keydown",function(t){var o=t.keyCode,a=t.target.value;if(o===kendo.keys.ENTER){var l=kendo.parseDate(a,i.format),r=n.values();if(l&&l<=n.max()&&l>=n.min()){var u=r.concat(l);n._multiCalendar.values(u),n.updateMultiSelect(),n._multiCalendar.navigate(l),n.trigger(e.changeEvent)}}})},e.prototype.initPopup=function(t){var n=this,i=function(){return n.trigger(e.openEvent)},o=function(){return n.trigger(e.closeEvent)};this._popup=$('<div class="k-calendar-container"></div>').appendTo(document.body).kendoPopup(__assign({},this.options.popup,{name:"Popup",animation:this.options.animation,anchor:t,open:i,close:o})).data("kendoPopup")},e.prototype.initCalendar=function(t){var n=this,i=this.options,o=function(){n.updateMultiSelect(),n.trigger(e.changeEvent)},a=function(){return n.trigger(e.navigateEvent)};this._multiCalendar=$("<div></div>").appendTo(t).kendoMultiCalendar({values:i.values,footer:i.footer,culture:i.culture,min:i.min,max:i.max,start:i.start,depth:i.depth,month:i.month,dates:i.dates,maxSelectedItems:i.maxSelectedItems,change:o,navigate:a}).data("kendoMultiCalendar"),kendo.calendar.makeUnselectable(this._multiCalendar.element)},e.prototype.updateDateInterval=function(){this.values(this.values())},e.prototype.updateMultiSelectValues=function(t){this._multiSelect.setDataSource(t),this._multiSelect.value(t),this._popup.visible()&&this._popup.position()},e.prototype.updateMultiSelect=function(){this.updateMultiSelectValues(this._multiCalendar.values()),this.options.autoClose&&this.close()},e}(kendo.ui.Widget);e.navigateEvent="navigate",e.changeEvent="change",e.openEvent="open",e.closeEvent="close",t.MultiDateSelect=e,e.fn=e.prototype,e.fn.options=__assign({},kendo.ui.Widget.fn.options,{name:"MultiDateSelect",autoClose:!0,popup:{},animation:{},enable:!0,maxSelectedItems:null,placeholder:"",tagTemplate:"",values:null,footer:"",culture:"",format:"M/d/yyyy",min:new Date(1900,0,1),max:new Date(2099,11,31),start:"month",depth:"month",month:{},dates:[]}),e.fn.events=[e.navigateEvent,e.changeEvent,e.openEvent,e.closeEvent],kendo.ui.plugin(e)}(kendoExt||(kendoExt={}));
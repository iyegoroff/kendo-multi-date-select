!function(){"use strict";function e(e){var t=new Date(e);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t}function t(t,n){return e(t).getTime()>e(n).getTime()}function n(t,n){return e(t).getTime()<e(n).getTime()}var i=kendo.ui,a=i.Widget,l=$.extend,u=(i.Popup,kendo.keys),o="navigate",r="change",s="open",p="close",c=a.extend({_multiSelect:null,_multiCalendar:null,_popup:null,init:function(e,t){var n=this;a.fn.init.call(n,e,t),n._initMultiSelect(e),n._initPopup(e),n._initCalendar(n._popup.element),n._updateDateInterval()},options:{name:"MultiDateSelect",autoClose:!0,popup:{},animation:{},enable:!0,maxSelectedItems:null,placeholder:"",tagTemplate:"",values:null,footer:"",culture:"",format:"M/d/yyyy",min:new Date(1900,0,1),max:new Date(2099,11,31),start:"month",depth:"month",month:{},dates:[]},events:[o,r,s,p],close:function(){this._popup.close()},open:function(){this._popup.open()},toggle:function(){this._popup.visible()?this.close():this.open()},destroy:function(){this._multiSelect.wrapper.find("input").off("keydown"),this._popup.destroy(),this._multiSelect.destroy(),this._multiCalendar.destroy()},enable:function(e){this._multiSelect.enable(e)},readonly:function(e){this._multiSelect.readonly(e)},max:function(e){return void 0!==e&&(this._multiCalendar.max(e),this._updateDateInterval()),this._multiCalendar.max()},min:function(e){return void 0!==e&&(this._multiCalendar.min(e),this._updateDateInterval()),this._multiCalendar.min()},values:function(e){var i=this;if(void 0!==e){var a=i.min(),l=i.max(),u=(e||[]).filter(function(e){return!(a&&n(e,a)||l&&t(e,l))});i._multiCalendar.values(u),i._updateMultiSelectValues(u),i._multiCalendar.navigate(u.length?u[u.length-1]:new Date)}return this._multiCalendar.values()},multiSelect:function(){return this._multiSelect},multiCalendar:function(){return this._multiCalendar},_initCalendar:function(e){var t=this,n=t.options,i=function(){t._updateMultiSelect(),t.trigger(r)},a=function(){t.trigger(o)};t._multiCalendar=$("<div></div>").appendTo(e).kendoMultiCalendar({values:n.values,footer:n.footer,culture:n.culture,min:n.min,max:n.max,start:n.start,depth:n.depth,month:n.month,dates:n.dates,maxSelectedItems:n.maxSelectedItems,change:i,navigate:a}).data("kendoMultiCalendar"),kendo.calendar.makeUnselectable(t._multiCalendar.element)},_initPopup:function(e){var t=this,n=t.options,i=function(){t.trigger(s)},a=function(){t.trigger(p)};t._popup=$('<div class="k-calendar-container"></div>').appendTo(document.body).kendoPopup(l(n.popup,{name:"Popup",animation:n.animation,anchor:e,open:i,close:a})).data("kendoPopup")},_initMultiSelect:function(e){var t=this,n=t.options;n.tagTemplate=n.tagTemplate||function(e){return kendo.toString(e,n.format)};var i=function(e){e.preventDefault(),t.open()},a=function(){t._multiCalendar.values(t._multiSelect.value()),t._popup.position(),t.trigger(r)};t._multiSelect=$("<select multiple></select>").appendTo(e).kendoMultiSelect({dataSource:n.values,value:n.values,ignoreCase:!1,enable:n.enable,maxSelectedItems:n.maxSelectedItems,placeholder:n.placeholder,tagTemplate:tagTemplate,open:i,change:a}).data("kendoMultiSelect"),t._multiSelect._filterSource=function(){},t._multiSelect.search=function(){},t._multiSelect.wrapper.find("input").on("keydown",function(e){var n=e.keyCode,i=e.target.value;if(n===u.ENTER){var a=kendo.parseDate(i,t.options.format),l=t.values();if(a&&a<=t.max()&&a>=t.min()){var o=l.concat(a);t._multiCalendar.values(o),t._updateMultiSelect(),t._multiCalendar.navigate(a),t.trigger(r)}}})},_updateDateInterval:function(){this.values(this.values())},_updateMultiSelectValues:function(e){this._multiSelect.setDataSource(e),this._multiSelect.value(e),this._popup.visible()&&this._popup.position()},_updateMultiSelect:function(){this._updateMultiSelectValues(this._multiCalendar.values()),this.options.autoClose&&this.close()}});i.plugin(c)}();